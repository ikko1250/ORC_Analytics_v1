# GitHub Issue #2: ç†±æºè¨ˆç®—æ–¹æ³•ã®å¤šæ§˜åŒ– - å¤‰æ›´ãƒ—ãƒ©ãƒ³

## ğŸ¯ èª²é¡Œã®æ¦‚è¦

ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ ã¯**æ¸©æ°´ã®ä½¿ç”¨ã‚’å‰æ**ã¨ã—ãŸç†±æºè¨ˆç®—ã®ã¿ã«å¯¾å¿œã—ã¦ãŠã‚Šã€ç”£æ¥­æ’ç†±ï¼ˆæ’ã‚¬ã‚¹ãªã©ï¼‰ã¸ã®å¯¾å¿œãŒã§ãã¦ã„ã¾ã›ã‚“ã€‚ã‚ˆã‚Šé«˜æ¸©åŸŸã‚„å¤šæ§˜ãªç†±æºã‚¿ã‚¤ãƒ—ã«å¯¾å¿œã™ã‚‹ãŸã‚ã€`calculate_orc_performance_from_heat_source`é–¢æ•°ã®æ‹¡å¼µãŒå¿…è¦ã§ã™ã€‚

## ğŸ“‹ ææ¡ˆã™ã‚‹å¤‰æ›´ãƒ—ãƒ©ãƒ³

### **1. æ–°ã—ã„ç†±æºè¨ˆç®—æ–¹å¼ã®è¿½åŠ **

#### **1.1 ç†±é‡ãƒ™ãƒ¼ã‚¹è¨ˆç®—æ–¹å¼ã®å®Ÿè£…**
- **ç›®çš„**: ç›´æ¥çš„ãªç†±é‡ï¼ˆkWï¼‰ã‹ã‚‰è¨ˆç®—ã™ã‚‹æ–¹å¼
- **å¯¾è±¡**: ãƒãƒƒãƒ•ã‚¡ä»˜ãã‚·ã‚¹ãƒ†ãƒ ã‚„è“„ç†±ã‚·ã‚¹ãƒ†ãƒ 
- **æ–°é–¢æ•°**: `calculate_orc_performance_from_heat_duty(Q_available, T_heat_source, ...)`

```python
def calculate_orc_performance_from_heat_duty(
    Q_available,           # åˆ©ç”¨å¯èƒ½ç†±é‡ [kW]
    T_heat_source,         # ç†±æºæ¸©åº¦ [K]
    T_cond,               # å‡ç¸®æ¸©åº¦ [K]
    eta_pump, eta_turb,   # åŠ¹ç‡
    fluid_orc: str = DEFAULT_FLUID,
    superheat_C: float = 10.0,
    pinch_delta_K: float = 10.0,
    **kwargs
):
    """ç›´æ¥ç†±é‡æŒ‡å®šã«ã‚ˆã‚‹ORCæ€§èƒ½è¨ˆç®—"""
    pass
```

#### **1.2 æ’ã‚¬ã‚¹ãƒ™ãƒ¼ã‚¹è¨ˆç®—æ–¹å¼ã®å®Ÿè£…**
- **ç›®çš„**: æ’ã‚¬ã‚¹ã®ç‰©æ€§ï¼ˆæ¸©åº¦ã€æµé‡ã€çµ„æˆï¼‰ã‹ã‚‰è¨ˆç®—
- **å¯¾è±¡**: é›»æ°—ã‚¢ãƒ¼ã‚¯ç‚‰ï¼ˆEAFï¼‰ãªã©ã®å·¥æ¥­ãƒ—ãƒ­ã‚»ã‚¹
- **æ–°é–¢æ•°**: `calculate_orc_performance_from_flue_gas(T_gas_in, m_gas, gas_composition, ...)`

```python
def calculate_orc_performance_from_flue_gas(
    T_gas_in,             # æ’ã‚¬ã‚¹å…¥å£æ¸©åº¦ [K]
    m_gas,                # æ’ã‚¬ã‚¹è³ªé‡æµé‡ [kg/s]
    gas_composition,      # ã‚¬ã‚¹çµ„æˆ {"CO2": 0.15, "H2O": 0.10, "N2": 0.70, ...}
    T_cond,               # å‡ç¸®æ¸©åº¦ [K]
    eta_pump, eta_turb,   # åŠ¹ç‡
    P_gas: float = 101325, # æ’ã‚¬ã‚¹åœ§åŠ› [Pa]
    T_gas_out_min: float = None, # æœ€ä½æ’ã‚¬ã‚¹æ¸©åº¦åˆ¶ç´„ [K]
    **kwargs
):
    """æ’ã‚¬ã‚¹ç‰©æ€§ã«åŸºã¥ãORCæ€§èƒ½è¨ˆç®—"""
    pass
```

### **2. æ—¢å­˜é–¢æ•°ã®æ‹¡å¼µã¨ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**

#### **2.1 `calculate_orc_performance_from_heat_source`ã®æ±ç”¨åŒ–**

```python
def calculate_orc_performance_from_heat_source(
    # æ—¢å­˜ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    T_htf_in, Vdot_htf, T_cond, eta_pump, eta_turb,
    # æ–°è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    heat_source_type: str = "liquid",      # "liquid", "high_pressure_water", "steam", "gas", "heat_duty"
    P_htf: float = 101325,                 # ç†±æºåœ§åŠ› [Pa] (é«˜åœ§æ°´ãƒ»è’¸æ°—ã®å ´åˆ)
    gas_composition: dict = None,          # ã‚¬ã‚¹çµ„æˆ (heat_source_type="gas"ã®å ´åˆ)
    Q_direct: float = None,               # ç›´æ¥ç†±é‡æŒ‡å®š [kW]
    T_source_out: float = None,           # ç†±æºå‡ºå£æ¸©åº¦æŒ‡å®š [K]
    mass_flow_mode: bool = False,         # True: Vdot_htfã‚’è³ªé‡æµé‡[kg/s]ã¨ã—ã¦è§£é‡ˆ
    **kwargs
):
    """
    æ±ç”¨ç†±æºå¯¾å¿œã®ORCæ€§èƒ½è¨ˆç®—
    
    Parameters:
    -----------
    heat_source_type : str
        ç†±æºã‚¿ã‚¤ãƒ—:
        - "liquid": é€šå¸¸ã®ä½åœ§æ¶²ä½“æ°´ (< 100Â°C, 1 atm)
        - "high_pressure_water": é«˜åœ§éç†±æ°´ (> 100Â°C, > 1 atm)
        - "steam": æ°´è’¸æ°— (ã‚¬ã‚¹çŠ¶æ…‹ã®æ°´)
        - "gas": ä¸€èˆ¬çš„ãªæ’ã‚¬ã‚¹
        - "heat_duty": ç›´æ¥ç†±é‡æŒ‡å®š
    P_htf : float
        ç†±æºæµä½“åœ§åŠ› [Pa] (é«˜åœ§æ°´ãƒ»è’¸æ°—ã®å ´åˆã«é‡è¦)
    mass_flow_mode : bool
        True: Vdot_htfã‚’è³ªé‡æµé‡[kg/s]ã¨ã—ã¦è§£é‡ˆ
        False: Vdot_htfã‚’ä½“ç©æµé‡[m3/s]ã¨ã—ã¦è§£é‡ˆ
    """
    
    if heat_source_type == "liquid":
        # é€šå¸¸ã®ä½åœ§æ¶²ä½“æ°´
        return _calculate_liquid_heat_source(T_htf_in, Vdot_htf, P_htf, ...)
        
    elif heat_source_type == "high_pressure_water":
        # é«˜åœ§éç†±æ°´ï¼ˆ100Â°Cä»¥ä¸Šã®æ¶²ä½“çŠ¶æ…‹ã®æ°´ï¼‰
        return _calculate_high_pressure_water_heat_source(T_htf_in, P_htf, Vdot_htf, ...)
        
    elif heat_source_type == "steam":
        # æ°´è’¸æ°—ï¼ˆã‚¬ã‚¹çŠ¶æ…‹ã®æ°´ï¼‰
        if mass_flow_mode:
            m_steam = Vdot_htf  # kg/s
        else:
            # ä½“ç©æµé‡ã‹ã‚‰è³ªé‡æµé‡ã«å¤‰æ›
            rho_steam = CP.PropsSI("DMASS", "T", T_htf_in, "P", P_htf, "Water")
            m_steam = Vdot_htf * rho_steam
        return _calculate_steam_heat_source(T_htf_in, P_htf, m_steam, ...)
        
    elif heat_source_type == "gas":
        # ä¸€èˆ¬çš„ãªæ’ã‚¬ã‚¹
        if mass_flow_mode:
            m_gas = Vdot_htf  # kg/s
        else:
            # ä½“ç©æµé‡ã‹ã‚‰è³ªé‡æµé‡ã«å¤‰æ›ï¼ˆã‚¬ã‚¹çµ„æˆã‚’è€ƒæ…®ï¼‰
            rho_gas = _get_flue_gas_properties(T_htf_in, gas_composition, P_htf)["rho"]
            m_gas = Vdot_htf * rho_gas
        return _calculate_gas_heat_source(T_htf_in, m_gas, gas_composition, ...)
        
    elif heat_source_type == "heat_duty":
        # ç›´æ¥ç†±é‡æŒ‡å®š
        return _calculate_direct_heat_duty(Q_direct, T_htf_in, T_source_out, ...)
        
    else:
        raise ValueError(f"Unknown heat_source_type: {heat_source_type}")
```

#### **2.2 ç†±æºã‚¿ã‚¤ãƒ—åˆ¥ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯åˆ†é›¢**

```python
def _calculate_liquid_heat_source(T_htf_in, Vdot_htf, T_cond, eta_pump, eta_turb, **kwargs):
    """ç¾åœ¨ã®æ¶²ä½“ç†±æºè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰"""
    pass

def _calculate_gas_heat_source(T_gas_in, Vdot_gas, gas_composition, T_cond, eta_pump, eta_turb, **kwargs):
    """æ–°è¦ã‚¬ã‚¹ç†±æºè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯"""
    # ã‚¬ã‚¹çµ„æˆã«åŸºã¥ãç‰©æ€§è¨ˆç®—
    # æ¸©åº¦ä¾å­˜æ¯”ç†±ã®ç©åˆ†è¨ˆç®—
    # åˆ©ç”¨å¯èƒ½ç†±é‡ã®ç®—å‡º
    pass

def _calculate_direct_heat_duty(Q_available, T_source, T_source_out, T_cond, eta_pump, eta_turb, **kwargs):
    """æ–°è¦ç†±é‡ãƒ™ãƒ¼ã‚¹è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯"""
    # ç›´æ¥æŒ‡å®šã•ã‚ŒãŸç†±é‡ã‹ã‚‰ORCè³ªé‡æµé‡ã‚’é€†ç®—
    # ç†±æºå‡ºå£æ¸©åº¦åˆ¶ç´„ã®è€ƒæ…®
    pass
```

### **3. æ’ã‚¬ã‚¹ç‰©æ€§è¨ˆç®—ã®å®Ÿè£…**

#### **3.1 Cantera + CoolProp ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ç‰©æ€§è¨ˆç®—**

```python
import cantera as ct
import CoolProp.CoolProp as CP

class FlueGasProperties:
    """æ’ã‚¬ã‚¹ç‰©æ€§è¨ˆç®—ã‚¯ãƒ©ã‚¹ï¼ˆCantera + CoolProp ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼‰"""
    
    def __init__(self, gas_composition, calculation_method="hybrid"):
        """
        Parameters:
        -----------
        gas_composition : dict
            ã‚¬ã‚¹çµ„æˆ {"CO2": 0.15, "H2O": 0.10, "N2": 0.70, ...}
        calculation_method : str
            è¨ˆç®—æ‰‹æ³• ("cantera", "coolprop", "hybrid")
        """
        self.gas_composition = gas_composition
        self.method = calculation_method
        self._setup_calculation_engines()
    
    def _setup_calculation_engines(self):
        """è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³ã®åˆæœŸåŒ–"""
        # Cantera ã‚¬ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š
        try:
            self.cantera_gas = ct.Solution('gri30.yaml')  # ã¾ãŸã¯é©åˆ‡ãªãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
            self._set_cantera_composition()
        except Exception as e:
            print(f"Cantera initialization failed: {e}")
            self.cantera_gas = None
        
        # CoolPropç”¨ã®çµ„æˆæ–‡å­—åˆ—ä½œæˆ
        self._coolprop_mixture = self._create_coolprop_mixture_string()
    
    def _set_cantera_composition(self):
        """Canteraã‚¬ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«çµ„æˆã‚’è¨­å®š"""
        if self.cantera_gas:
            # Canteraã®ç¨®åã«ãƒãƒƒãƒ”ãƒ³ã‚°
            cantera_mapping = {
                "CO2": "CO2", "H2O": "H2O", "N2": "N2", "O2": "O2",
                "SO2": "SO2", "CO": "CO", "NO": "NO", "NO2": "NO2"
            }
            
            cantera_composition = {}
            for species, fraction in self.gas_composition.items():
                if species in cantera_mapping and fraction > 0:
                    cantera_composition[cantera_mapping[species]] = fraction
            
            self.cantera_gas.X = cantera_composition
    
    def _create_coolprop_mixture_string(self):
        """CoolPropç”¨ã®æ··åˆç‰©æ–‡å­—åˆ—ã‚’ä½œæˆ"""
        coolprop_mapping = {
            "CO2": "CO2", "H2O": "Water", "N2": "Nitrogen", "O2": "Oxygen"
        }
        
        mixture_components = []
        for species, fraction in self.gas_composition.items():
            if species in coolprop_mapping and fraction > 0:
                mixture_components.append(f"{coolprop_mapping[species]}[{fraction}]")
        
        return "&".join(mixture_components)

def _get_flue_gas_properties(T_gas, gas_composition, P_gas=101325, method="hybrid"):
    """
    æ’ã‚¬ã‚¹ã®ç‰©æ€§å€¤è¨ˆç®—ï¼ˆCantera + CoolProp ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼‰
    
    Parameters:
    -----------
    T_gas : float
        ã‚¬ã‚¹æ¸©åº¦ [K]
    gas_composition : dict
        ã‚¬ã‚¹çµ„æˆ {"CO2": 0.15, "H2O": 0.10, "N2": 0.70, ...}
    P_gas : float
        ã‚¬ã‚¹åœ§åŠ› [Pa]
    method : str
        è¨ˆç®—æ‰‹æ³• ("cantera", "coolprop", "hybrid")
    
    Returns:
    --------
    dict
        ç‰©æ€§å€¤ {"rho": å¯†åº¦, "Cp": æ¯”ç†±, "h": ã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼, "s": ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼}
    """
    flue_gas = FlueGasProperties(gas_composition, method)
    
    if method == "cantera" and flue_gas.cantera_gas:
        return _calculate_properties_cantera(flue_gas.cantera_gas, T_gas, P_gas)
    elif method == "coolprop":
        return _calculate_properties_coolprop(flue_gas._coolprop_mixture, T_gas, P_gas)
    elif method == "hybrid":
        return _calculate_properties_hybrid(flue_gas, T_gas, P_gas)
    else:
        raise ValueError(f"Unknown calculation method: {method}")

def _calculate_properties_cantera(gas, T_gas, P_gas):
    """Canteraã‚’ä½¿ç”¨ã—ãŸç‰©æ€§è¨ˆç®—"""
    try:
        gas.TP = T_gas, P_gas
        
        return {
            "rho": gas.density,                    # kg/m3
            "Cp": gas.cp_mass,                     # J/kg/K
            "h": gas.enthalpy_mass,               # J/kg
            "s": gas.entropy_mass,                # J/kg/K
            "viscosity": gas.viscosity,           # PaÂ·s
            "thermal_conductivity": gas.thermal_conductivity,  # W/m/K
            "molecular_weight": gas.mean_molecular_weight,     # kg/kmol
            "method": "cantera"
        }
    except Exception as e:
        raise ValueError(f"Cantera calculation failed: {e}")

def _calculate_properties_coolprop(mixture_string, T_gas, P_gas):
    """CoolPropã‚’ä½¿ç”¨ã—ãŸç‰©æ€§è¨ˆç®—"""
    try:
        rho = CP.PropsSI("D", "T", T_gas, "P", P_gas, mixture_string)
        Cp = CP.PropsSI("C", "T", T_gas, "P", P_gas, mixture_string)
        h = CP.PropsSI("H", "T", T_gas, "P", P_gas, mixture_string)
        s = CP.PropsSI("S", "T", T_gas, "P", P_gas, mixture_string)
        
        return {
            "rho": rho,                           # kg/m3
            "Cp": Cp,                            # J/kg/K
            "h": h,                              # J/kg
            "s": s,                              # J/kg/K
            "method": "coolprop"
        }
    except Exception as e:
        raise ValueError(f"CoolProp calculation failed: {e}")

def _calculate_properties_hybrid(flue_gas, T_gas, P_gas):
    """ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è¨ˆç®—ï¼ˆCantera + CoolPropï¼‰"""
    results = {}
    
    # åŸºæœ¬ç‰©æ€§ï¼šCanteraã‚’å„ªå…ˆï¼ˆé«˜ç²¾åº¦ãªç†±åŒ–å­¦è¨ˆç®—ï¼‰
    if flue_gas.cantera_gas:
        try:
            cantera_props = _calculate_properties_cantera(flue_gas.cantera_gas, T_gas, P_gas)
            results.update({
                "rho": cantera_props["rho"],
                "Cp": cantera_props["Cp"],
                "h": cantera_props["h"],
                "s": cantera_props["s"],
                "molecular_weight": cantera_props["molecular_weight"]
            })
        except Exception as e:
            print(f"Cantera calculation failed, fallback to CoolProp: {e}")
            # CoolPropã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
            coolprop_props = _calculate_properties_coolprop(flue_gas._coolprop_mixture, T_gas, P_gas)
            results.update(coolprop_props)
    
    # è¼¸é€ç‰©æ€§ï¼šå¯èƒ½ã§ã‚ã‚Œã°Canteraï¼ˆåˆ†å­å‹•åŠ›å­¦ãƒ™ãƒ¼ã‚¹ï¼‰
    if flue_gas.cantera_gas:
        try:
            flue_gas.cantera_gas.TP = T_gas, P_gas
            results.update({
                "viscosity": flue_gas.cantera_gas.viscosity,
                "thermal_conductivity": flue_gas.cantera_gas.thermal_conductivity
            })
        except:
            # è¼¸é€ç‰©æ€§è¨ˆç®—ã«å¤±æ•—ã—ãŸå ´åˆã¯CoolPropã¾ãŸã¯æ¨ç®—å¼
            results.update({
                "viscosity": _estimate_gas_viscosity(T_gas, flue_gas.gas_composition),
                "thermal_conductivity": _estimate_gas_thermal_conductivity(T_gas, flue_gas.gas_composition)
            })
    
    results["method"] = "hybrid"
    return results

def _calculate_gas_heat_capacity_integral(T_hot, T_cold, gas_composition, method="hybrid"):
    """
    æ¸©åº¦ä¾å­˜æ¯”ç†±ã®ç©åˆ†è¨ˆç®—
    
    Parameters:
    -----------
    T_hot, T_cold : float
        é«˜æ¸©å´ãƒ»ä½æ¸©å´æ¸©åº¦ [K]
    gas_composition : dict
        ã‚¬ã‚¹çµ„æˆ
    method : str
        è¨ˆç®—æ‰‹æ³•
    
    Returns:
    --------
    float
        ç©åˆ†å¹³å‡æ¯”ç†± [J/kg/K]
    """
    if method == "cantera":
        return _integrate_cp_cantera(T_hot, T_cold, gas_composition)
    elif method == "coolprop":
        return _integrate_cp_coolprop(T_hot, T_cold, gas_composition)
    else:  # hybrid
        try:
            return _integrate_cp_cantera(T_hot, T_cold, gas_composition)
        except:
            return _integrate_cp_coolprop(T_hot, T_cold, gas_composition)

def _integrate_cp_cantera(T_hot, T_cold, gas_composition):
    """Canteraã‚’ä½¿ç”¨ã—ãŸæ¯”ç†±ç©åˆ†"""
    flue_gas = FlueGasProperties(gas_composition)
    if not flue_gas.cantera_gas:
        raise ValueError("Cantera not available")
    
    # æ¸©åº¦ç‚¹ã§ã®æ¯”ç†±è¨ˆç®—
    n_points = 20
    T_range = np.linspace(T_cold, T_hot, n_points)
    cp_values = []
    
    for T in T_range:
        flue_gas.cantera_gas.TP = T, 101325  # æ¨™æº–åœ§åŠ›
        cp_values.append(flue_gas.cantera_gas.cp_mass)
    
    # æ•°å€¤ç©åˆ†ï¼ˆå°å½¢å…¬å¼ï¼‰
    cp_integral = np.trapz(cp_values, T_range)
    cp_average = cp_integral / (T_hot - T_cold)
    
    return cp_average

def _estimate_gas_viscosity(T_gas, gas_composition):
    """ã‚¬ã‚¹ç²˜åº¦ã®æ¨ç®—ï¼ˆWilkeã®æ··åˆå‰‡ï¼‰"""
    # ç°¡æ˜“æ¨ç®—å¼ï¼ˆå®Ÿè£…æ™‚ã«ã¯è©³ç´°ãªè¨ˆç®—å¼ã‚’ä½¿ç”¨ï¼‰
    base_viscosity = 2e-5 * (T_gas / 300) ** 0.7  # PaÂ·s
    return base_viscosity

def _estimate_gas_thermal_conductivity(T_gas, gas_composition):
    """ã‚¬ã‚¹ç†±ä¼å°åº¦ã®æ¨ç®—"""
    # ç°¡æ˜“æ¨ç®—å¼ï¼ˆå®Ÿè£…æ™‚ã«ã¯è©³ç´°ãªè¨ˆç®—å¼ã‚’ä½¿ç”¨ï¼‰
    base_conductivity = 0.03 * (T_gas / 300) ** 0.8  # W/m/K
    return base_conductivity
```

#### **3.2 æ’ã‚¬ã‚¹ç‰¹æœ‰ã®è¨ˆç®—ã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**

```python
# å…¸å‹çš„ãªå·¥æ¥­ãƒ—ãƒ­ã‚»ã‚¹åˆ¥ã‚¬ã‚¹çµ„æˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆæ‹¡å¼µç‰ˆï¼‰
DEFAULT_GAS_COMPOSITIONS = {
    "steel_eaf": {
        "CO2": 0.15,
        "H2O": 0.10,
        "N2": 0.70,
        "O2": 0.05,
        "CO": 0.00,  # ç‡ƒç„¼å®Œäº†æƒ³å®š
        "temperature_range": (1200, 1600),  # K
        "pressure_range": (101325, 120000), # Pa
        "typical_flow": (5000, 15000),      # Nm3/h
        "calculation_method": "hybrid"       # æ¨å¥¨è¨ˆç®—æ‰‹æ³•
    },
    "cement_kiln": {
        "CO2": 0.25,
        "H2O": 0.12,
        "N2": 0.58,
        "SO2": 0.03,
        "O2": 0.02,
        "temperature_range": (573, 673),    # K
        "pressure_range": (101325, 110000), # Pa
        "typical_flow": (180000, 220000),   # Nm3/h
        "calculation_method": "hybrid"
    },
    "natural_gas_combustion": {
        "CO2": 0.11,
        "H2O": 0.20,
        "N2": 0.69,
        "O2": 0.00,  # å®Œå…¨ç‡ƒç„¼æƒ³å®š
        "temperature_range": (473, 773),    # K
        "pressure_range": (101325, 105000), # Pa
        "typical_flow": (1000, 10000),     # Nm3/h
        "calculation_method": "coolprop"    # å˜ç´”çµ„æˆã®ãŸã‚CoolPropã§ååˆ†
    },
    "coal_combustion": {
        "CO2": 0.14,
        "H2O": 0.08,
        "N2": 0.75,
        "SO2": 0.02,
        "O2": 0.01,
        "temperature_range": (473, 873),    # K
        "pressure_range": (101325, 110000), # Pa
        "typical_flow": (50000, 200000),   # Nm3/h
        "calculation_method": "cantera"     # SOxå«æœ‰ã®ãŸã‚CanteraãŒé©åˆ‡
    },
    "biomass_combustion": {
        "CO2": 0.13,
        "H2O": 0.15,
        "N2": 0.70,
        "O2": 0.02,
        "temperature_range": (573, 1073),   # K
        "pressure_range": (101325, 105000), # Pa
        "typical_flow": (5000, 50000),     # Nm3/h
        "calculation_method": "hybrid"
    }
}

def get_default_gas_composition(process_type: str):
    """å·¥æ¥­ãƒ—ãƒ­ã‚»ã‚¹åˆ¥ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¬ã‚¹çµ„æˆã‚’å–å¾—"""
    if process_type in DEFAULT_GAS_COMPOSITIONS:
        composition_data = DEFAULT_GAS_COMPOSITIONS[process_type].copy()
        # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’é™¤ã„ã¦çµ„æˆã®ã¿æŠ½å‡º
        gas_composition = {k: v for k, v in composition_data.items() 
                          if isinstance(v, (int, float)) and k not in 
                          ["temperature_range", "pressure_range", "typical_flow"]}
        return gas_composition, composition_data
    else:
        # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦å¤©ç„¶ã‚¬ã‚¹ç‡ƒç„¼ã‚’ä½¿ç”¨
        return get_default_gas_composition("natural_gas_combustion")

def get_recommended_calculation_method(process_type: str, temperature: float):
    """ãƒ—ãƒ­ã‚»ã‚¹ã‚¿ã‚¤ãƒ—ã¨æ¸©åº¦ã«åŸºã¥ãæ¨å¥¨è¨ˆç®—æ‰‹æ³•"""
    if process_type in DEFAULT_GAS_COMPOSITIONS:
        base_method = DEFAULT_GAS_COMPOSITIONS[process_type].get("calculation_method", "hybrid")
        
        # é«˜æ¸©åŸŸã§ã¯Canteraã®ç²¾åº¦ãŒé«˜ã„
        if temperature > 1000:  # K
            return "cantera" if base_method != "coolprop" else "hybrid"
        # ä½æ¸©åŸŸã§ã¯CoolPropãŒå®‰å®š
        elif temperature < 500:  # K
            return "coolprop" if base_method != "cantera" else "hybrid"
        else:
            return base_method
    else:
        return "hybrid"

def validate_gas_composition(gas_composition: dict, tolerance=0.01):
    """ã‚¬ã‚¹çµ„æˆã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯"""
    total = sum(gas_composition.values())
    if abs(total - 1.0) > tolerance:
        raise ValueError(f"Gas composition sum ({total:.3f}) deviates from 1.0 by more than {tolerance}")
    
    # è² ã®å€¤ãƒã‚§ãƒƒã‚¯
    for species, fraction in gas_composition.items():
        if fraction < 0:
            raise ValueError(f"Negative fraction for {species}: {fraction}")
    
    return True

def get_default_gas_composition(process_type: str):
    """å·¥æ¥­ãƒ—ãƒ­ã‚»ã‚¹åˆ¥ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¬ã‚¹çµ„æˆã‚’å–å¾—"""
    return DEFAULT_GAS_COMPOSITIONS.get(process_type, DEFAULT_GAS_COMPOSITIONS["natural_gas_combustion"])
```

### **4. é«˜æ¸©ãƒ»é«˜åœ§å¯¾å¿œã®æ‹¡å¼µ**

#### **4.1 ç¾åœ¨ã®åˆ¶ç´„ã¨èª²é¡Œ**

**ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ ã®åˆ¶ç´„**:
- ç†±æºæµä½“ã¨ã—ã¦**æ°´ï¼ˆliquid Waterï¼‰ã®ã¿**ã‚’æƒ³å®š
- **100Â°Cæœªæº€ã®ä½åœ§æ¡ä»¶**ã®ã¿å¯¾å¿œï¼ˆCoolPropã§"Water"ã¨ã—ã¦æ¶²ä½“çŠ¶æ…‹ï¼‰
- **é«˜åœ§åŠ›ä¸‹ã§ã®100Â°Cä»¥ä¸Šã®æ°´**ï¼ˆéç†±æ°´ï¼‰ã«å¯¾å¿œä¸å¯
- **æ°´è’¸æ°—ï¼ˆsteamï¼‰**ã«ã¯æœªå¯¾å¿œ

**æ–°è¦å¯¾å¿œãŒå¿…è¦ãªç†±æºã‚¿ã‚¤ãƒ—**:
1. **é«˜åœ§éç†±æ°´**: é«˜åœ§åŠ›ä¸‹ã§100Â°Cä»¥ä¸Šã®æ¶²ä½“çŠ¶æ…‹ã®æ°´
2. **æ°´è’¸æ°—ï¼ˆSteamï¼‰**: ã‚¬ã‚¹çŠ¶æ…‹ã®æ°´è’¸æ°—
3. **éç†±è’¸æ°—**: é£½å’Œæ¸©åº¦ä»¥ä¸Šã«åŠ ç†±ã•ã‚ŒãŸæ°´è’¸æ°—

#### **4.2 é«˜åœ§éç†±æ°´å¯¾å¿œã®å®Ÿè£…**

```python
def _calculate_high_pressure_water_heat_source(T_htf_in, P_htf, Vdot_htf, T_cond, eta_pump, eta_turb, **kwargs):
    """
    é«˜åœ§éç†±æ°´ã®ç†±æºè¨ˆç®—
    
    Parameters:
    -----------
    T_htf_in : float
        éç†±æ°´å…¥å£æ¸©åº¦ [K] (> 373.15K)
    P_htf : float
        æ°´ã®åœ§åŠ› [Pa] (> 101325Pa)
    Vdot_htf : float
        ä½“ç©æµé‡ [m3/s]
    """
    # é«˜åœ§æ°´ã®çŠ¶æ…‹ç¢ºèª
    if T_htf_in > 373.15 and P_htf > 101325:
        # CoolPropã§é«˜åœ§æ°´ã®ç‰©æ€§è¨ˆç®—
        try:
            # æ¶²ä½“çŠ¶æ…‹ã®ç¢ºèª
            phase = CP.PhaseSI("T", T_htf_in, "P", P_htf, "Water")
            if phase in ["liquid", "supercritical_liquid"]:
                # é«˜åœ§æ¶²ä½“æ°´ã¨ã—ã¦è¨ˆç®—
                rho_htf = CP.PropsSI("DMASS", "T", T_htf_in, "P", P_htf, "Water")
                Cp_htf = CP.PropsSI("CPMASS", "T", T_htf_in, "P", P_htf, "Water")
                # æ—¢å­˜ã®æ¶²ä½“è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨
                return _calculate_liquid_heat_source_core(T_htf_in, Vdot_htf, rho_htf, Cp_htf, ...)
            else:
                raise ValueError(f"Water at T={T_htf_in:.1f}K, P={P_htf:.0f}Pa is not in liquid phase: {phase}")
        except Exception as e:
            raise ValueError(f"High-pressure water property calculation failed: {e}")
    else:
        # é€šå¸¸ã®ä½åœ§æ°´ã¨ã—ã¦å‡¦ç†
        return _calculate_liquid_heat_source(T_htf_in, Vdot_htf, ...)
```

#### **4.3 æ°´è’¸æ°—å¯¾å¿œã®å®Ÿè£…ï¼ˆã‚¬ã‚¹ç†±æºã¨ã—ã¦ï¼‰**

```python
def _calculate_steam_heat_source(T_steam_in, P_steam, m_steam, T_cond, eta_pump, eta_turb, **kwargs):
    """
    æ°´è’¸æ°—ç†±æºã®è¨ˆç®—ï¼ˆã‚¬ã‚¹ç†±æºã®ä¸€ç¨®ã¨ã—ã¦å®Ÿè£…ï¼‰
    
    Parameters:
    -----------
    T_steam_in : float
        è’¸æ°—å…¥å£æ¸©åº¦ [K]
    P_steam : float
        è’¸æ°—åœ§åŠ› [Pa]
    m_steam : float
        è’¸æ°—è³ªé‡æµé‡ [kg/s]
    """
    # æ°´è’¸æ°—çµ„æˆï¼ˆç´”ç²‹ãªæ°´è’¸æ°—ï¼‰
    steam_composition = {"H2O": 1.0}
    
    # è’¸æ°—ã®çŠ¶æ…‹ç¢ºèª
    try:
        phase = CP.PhaseSI("T", T_steam_in, "P", P_steam, "Water")
        if phase not in ["gas", "supercritical_gas"]:
            raise ValueError(f"Water at T={T_steam_in:.1f}K, P={P_steam:.0f}Pa is not steam: {phase}")
        
        # è’¸æ°—ã®ç‰©æ€§è¨ˆç®—
        rho_steam = CP.PropsSI("DMASS", "T", T_steam_in, "P", P_steam, "Water")
        Cp_steam = CP.PropsSI("CPMASS", "T", T_steam_in, "P", P_steam, "Water")
        h_steam_in = CP.PropsSI("HMASS", "T", T_steam_in, "P", P_steam, "Water")
        
        # å‡ç¸®åˆ¶ç´„ã‚’è€ƒæ…®ã—ãŸå‡ºå£æ¸©åº¦è¨­å®š
        T_sat_at_P = CP.PropsSI("T", "P", P_steam, "Q", 1, "Water")  # é£½å’Œæ¸©åº¦
        T_steam_out_min = max(T_sat_at_P + 10, 373.15)  # å‡ç¸®é˜²æ­¢ã®ãŸã‚+10K
        
        # ã‚¬ã‚¹ç†±æºè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨
        return _calculate_gas_heat_source_core(
            T_gas_in=T_steam_in,
            m_gas=m_steam,
            gas_composition=steam_composition,
            rho_gas=rho_steam,
            Cp_gas=Cp_steam,
            T_gas_out_min=T_steam_out_min,
            **kwargs
        )
        
    except Exception as e:
        raise ValueError(f"Steam property calculation failed: {e}")
```

#### **4.4 ä½œå‹•æµä½“ã®è‡ªå‹•é¸æŠæ©Ÿèƒ½**

```python
def select_optimal_working_fluid(T_heat_source, P_heat_source=101325, heat_source_type="liquid"):
    """
    ç†±æºæ¡ä»¶ã«å¿œã˜ãŸæœ€é©ä½œå‹•æµä½“é¸æŠ
    
    Parameters:
    -----------
    T_heat_source : float
        ç†±æºæ¸©åº¦ [K]
    P_heat_source : float
        ç†±æºåœ§åŠ› [Pa]
    heat_source_type : str
        ç†±æºã‚¿ã‚¤ãƒ— ("liquid", "gas", "steam", "heat_duty")
    
    Returns:
    --------
    str
        æ¨å¥¨ä½œå‹•æµä½“å
    """
    # æ°´è’¸æ°—ç†±æºã®å ´åˆã®ç‰¹åˆ¥å‡¦ç†
    if heat_source_type == "steam" or (heat_source_type == "gas" and "H2O" in gas_composition):
        if T_heat_source < 423.15:  # < 150Â°C
            return "R245fa"  # ä½æ¸©è’¸æ°—
        elif T_heat_source < 523.15:  # < 250Â°C
            return "R1234ze"  # ä¸­æ¸©è’¸æ°—
        else:  # > 250Â°C
            return "Toluene"  # é«˜æ¸©è’¸æ°—ï¼ˆæ°´è’¸æ°—ã‚µã‚¤ã‚¯ãƒ«ã¯é¿ã‘ã‚‹ï¼‰
    
    # é€šå¸¸ã®ç†±æºã®å ´åˆ
    if T_heat_source < 373.15:  # < 100Â°C
        return "R245fa"
    elif T_heat_source < 423.15:  # < 150Â°C
        return "R1234ze"
    elif T_heat_source < 523.15:  # < 250Â°C
        return "Toluene"
    else:  # > 250Â°C
        return "Water"  # æ°´è’¸æ°—ã‚µã‚¤ã‚¯ãƒ«ï¼ˆéæ°´è’¸æ°—ç†±æºã®å ´åˆã®ã¿ï¼‰
```

#### **4.5 æ¸©åº¦ãƒ»åœ§åŠ›ç¯„å›²ã®æ‹¡å¼µ**

```python
# é«˜æ¸©ãƒ»é«˜åœ§åŸŸå¯¾å¿œã®è¨­å®š
HIGH_TEMP_HIGH_PRESSURE_CONFIG = {
    "working_fluids": {
        "low_temp": ["R245fa", "R1234ze", "R134a"],           # < 150Â°C
        "mid_temp": ["Toluene", "Cyclohexane", "n-Pentane"],  # 150-300Â°C
        "high_temp": ["Water", "Therminol_VP1", "Dowtherm_A"] # > 300Â°C
    },
    "heat_source_types": {
        "low_pressure_water": {
            "temp_range": (293, 373),      # 20-100Â°C
            "pressure_range": (101325, 101325),  # æ¨™æº–å¤§æ°—åœ§
            "phase": "liquid"
        },
        "high_pressure_water": {
            "temp_range": (373, 573),      # 100-300Â°C
            "pressure_range": (101325, 5e6),     # 1-50 bar
            "phase": "liquid"
        },
        "steam": {
            "temp_range": (373, 1073),     # 100-800Â°C
            "pressure_range": (101325, 10e6),    # 1-100 bar
            "phase": "gas"
        },
        "flue_gas": {
            "temp_range": (473, 1573),     # 200-1300Â°C
            "pressure_range": (101325, 300000),  # 1-3 bar
            "phase": "gas"
        }
    },
    "temperature_ranges": {
        "current": (70, 100),           # ç¾åœ¨ã®å¯¾å¿œç¯„å›² [Â°C]
        "extended_water": (70, 300),    # é«˜åœ§æ°´æ‹¡å¼µç¯„å›² [Â°C]
        "extended_steam": (100, 800),   # æ°´è’¸æ°—å¯¾å¿œç¯„å›² [Â°C]
        "extended_gas": (200, 1300),    # æ’ã‚¬ã‚¹å¯¾å¿œç¯„å›² [Â°C]
        "supercritical": (374, 800)     # è¶…è‡¨ç•Œå¯¾å¿œç¯„å›² [Â°C]
    }
}
```

### **5. é…ç½®ã¨ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã®å¤‰æ›´**

#### **5.1 æ–°ã—ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆ**

```
ORC_analysis/
â”œâ”€â”€ heat_sources/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ liquid_heat_source.py    # æ—¢å­˜æ¶²ä½“ç†±æº
â”‚   â”œâ”€â”€ gas_heat_source.py       # æ–°è¦ã‚¬ã‚¹ç†±æº
â”‚   â”œâ”€â”€ direct_heat_duty.py      # æ–°è¦ç†±é‡ãƒ™ãƒ¼ã‚¹
â”‚   â””â”€â”€ heat_source_factory.py   # ç†±æºã‚¿ã‚¤ãƒ—åˆ¤å®šãƒ»é¸æŠ
â”œâ”€â”€ fluid_properties/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ gas_mixtures.py          # ã‚¬ã‚¹æ··åˆç‰©ç‰©æ€§
â”‚   â”œâ”€â”€ high_temp_fluids.py      # é«˜æ¸©ä½œå‹•æµä½“
â”‚   â””â”€â”€ fluid_selector.py        # ä½œå‹•æµä½“è‡ªå‹•é¸æŠ
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ gas_compositions.py      # å·¥æ¥­ãƒ—ãƒ­ã‚»ã‚¹åˆ¥ã‚¬ã‚¹çµ„æˆ
â”‚   â””â”€â”€ process_conditions.py    # å…¸å‹çš„ãªãƒ—ãƒ­ã‚»ã‚¹æ¡ä»¶
â””â”€â”€ ORC_Analysis.py              # ãƒ¡ã‚¤ãƒ³é–¢æ•°ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰
```

#### **5.2 Plot_Template.pyã®æ›´æ–°**

```python
# æ–°ã—ã„è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
config = {
    "thermo_params": {
        # æ—¢å­˜ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        "T_cond_K": 305.0,
        "eta_pump": 0.40,
        "eta_turb": 0.80,
        "fluid_orc": DEFAULT_FLUID,
        "fluid_htf": "Water",
        "superheat_C": 8.0,
        "pinch_delta_K": 10.0,
        
        # æ–°è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        "heat_source_type": "liquid",      # "liquid", "high_pressure_water", "steam", "gas", "heat_duty"
        "P_htf_Pa": 101325,               # ç†±æºåœ§åŠ› [Pa]
        "mass_flow_mode": False,          # True: è³ªé‡æµé‡æŒ‡å®š, False: ä½“ç©æµé‡æŒ‡å®š
        "auto_fluid_selection": False,    # è‡ªå‹•æµä½“é¸æŠ
        "high_temp_mode": False,          # é«˜æ¸©ãƒ¢ãƒ¼ãƒ‰
    },
    
    # é«˜åœ§æ°´è¨­å®šï¼ˆheat_source_type="high_pressure_water"ã®å ´åˆï¼‰
    "high_pressure_water_params": {
        "pressure_Pa": 500000,            # 5 bar
        "max_temp_K": 573.15,            # 300Â°C
        "min_subcooling_K": 10.0,        # éå†·å´åº¦
    },
    
    # æ°´è’¸æ°—è¨­å®šï¼ˆheat_source_type="steam"ã®å ´åˆï¼‰
    "steam_params": {
        "pressure_Pa": 200000,            # 2 bar
        "superheat_degree_K": 50.0,      # éç†±åº¦
        "condensation_prevention": True,   # å‡ç¸®é˜²æ­¢
        "min_outlet_temp_K": 383.15,     # æœ€ä½å‡ºå£æ¸©åº¦ï¼ˆ110Â°Cï¼‰
    },
    
    # æ’ã‚¬ã‚¹è¨­å®šï¼ˆheat_source_type="gas"ã®å ´åˆï¼‰
    "gas_params": {
        "process_type": "steel_eaf",      # ãƒ—ãƒ­ã‚»ã‚¹ã‚¿ã‚¤ãƒ—
        "custom_composition": None,        # ã‚«ã‚¹ã‚¿ãƒ çµ„æˆ
        "gas_pressure_Pa": 101325,        # ã‚¬ã‚¹åœ§åŠ›
        "min_outlet_temp_K": 393.15,      # æœ€ä½å‡ºå£æ¸©åº¦ï¼ˆ120Â°Cï¼‰
        "dew_point_consideration": True,   # éœ²ç‚¹è€ƒæ…®
    },
    
    # ç†±é‡ãƒ™ãƒ¼ã‚¹è¨­å®šï¼ˆheat_source_type="heat_duty"ã®å ´åˆï¼‰
    "heat_duty_params": {
        "Q_available_kW": 1000,           # åˆ©ç”¨å¯èƒ½ç†±é‡
        "T_source_out_K": None,           # ç†±æºå‡ºå£æ¸©åº¦ï¼ˆæŒ‡å®šå¯èƒ½ï¼‰
        "heat_recovery_efficiency": 0.85, # ç†±å›ååŠ¹ç‡
    },
    
    # æ—¢å­˜ã®çµŒæ¸ˆãƒ»ã‚¹ã‚¤ãƒ¼ãƒ—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    "economic_params": { ... },
    "sweep_params": {
        "T_htf_min_C": 70,
        "T_htf_max_C": 300,              # é«˜æ¸©åŸŸã¾ã§æ‹¡å¼µ
        "n_T_points": 100,
        "Vdot_values_m3h": np.arange(20, 50 + 5, 5),
        "pressure_sweep": False,          # åœ§åŠ›ã‚¹ã‚¤ãƒ¼ãƒ—ã®æœ‰ç„¡
        "P_values_bar": [1, 5, 10, 20],  # åœ§åŠ›ã‚¹ã‚¤ãƒ¼ãƒ—å€¤
    },
    ...
}

# ä½¿ç”¨ä¾‹ï¼šé«˜åœ§æ°´ã®å ´åˆ
if config["thermo_params"]["heat_source_type"] == "high_pressure_water":
    # é«˜åœ§æ°´è¨­å®šã®é©ç”¨
    thermo_cfg["P_htf_Pa"] = config["high_pressure_water_params"]["pressure_Pa"]
    sweep_cfg["T_htf_max_C"] = min(
        config["high_pressure_water_params"]["max_temp_K"] - 273.15,
        sweep_cfg["T_htf_max_C"]
    )

# ä½¿ç”¨ä¾‹ï¼šæ°´è’¸æ°—ã®å ´åˆ
elif config["thermo_params"]["heat_source_type"] == "steam":
    # æ°´è’¸æ°—è¨­å®šã®é©ç”¨
    thermo_cfg["P_htf_Pa"] = config["steam_params"]["pressure_Pa"]
    thermo_cfg["mass_flow_mode"] = True  # è’¸æ°—ã¯é€šå¸¸è³ªé‡æµé‡ã§æŒ‡å®š
    sweep_cfg["T_htf_min_C"] = 100       # è’¸æ°—ã¯100Â°Cä»¥ä¸Š
```

### **6. å®Ÿè£…ã®æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**

#### **Phase 1: åŸºç›¤æ•´å‚™ (Week 1-2)**
1. **æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**
   - `calculate_orc_performance_from_heat_source`ã®åˆ†å‰²
   - ç†±æºã‚¿ã‚¤ãƒ—åˆ¤å®šæ©Ÿèƒ½ã®å®Ÿè£…
   - åŸºæœ¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

2. **Cantera + CoolProp ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ç‰©æ€§è¨ˆç®—ã®åŸºç›¤æ§‹ç¯‰**
   - `FlueGasProperties`ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…
   - Canteraã‚¬ã‚¹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–ãƒ­ã‚¸ãƒƒã‚¯
   - CoolPropæ··åˆç‰©æ–‡å­—åˆ—ã®ç”Ÿæˆæ©Ÿèƒ½
   - åŸºæœ¬çš„ãªç‰©æ€§è¨ˆç®—é–¢æ•°ï¼ˆå¯†åº¦ã€æ¯”ç†±ã€ã‚¨ãƒ³ã‚¿ãƒ«ãƒ”ãƒ¼ï¼‰

3. **æ’ã‚¬ã‚¹çµ„æˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹ç¯‰**
   - å·¥æ¥­ãƒ—ãƒ­ã‚»ã‚¹åˆ¥ã‚¬ã‚¹çµ„æˆãƒ‡ãƒ¼ã‚¿
   - æ¨å¥¨è¨ˆç®—æ‰‹æ³•ã®æ±ºå®šãƒ­ã‚¸ãƒƒã‚¯
   - çµ„æˆå¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½

#### **Phase 2: æ’ã‚¬ã‚¹å¯¾å¿œ (Week 3-4)**
1. **é«˜ç²¾åº¦æ’ã‚¬ã‚¹è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…**
   - `_calculate_gas_heat_source`é–¢æ•°ï¼ˆCantera/CoolPropãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼‰
   - æ¸©åº¦ä¾å­˜æ¯”ç†±ã®ç©åˆ†è¨ˆç®—ï¼ˆæ•°å€¤ç©åˆ†ï¼‰
   - è¼¸é€ç‰©æ€§ï¼ˆç²˜åº¦ã€ç†±ä¼å°åº¦ï¼‰ã®è¨ˆç®—ãƒ»æ¨ç®—
   - åŒ–å­¦å¹³è¡¡è¨ˆç®—ï¼ˆCanteraã®é«˜åº¦æ©Ÿèƒ½æ´»ç”¨ï¼‰

2. **æ’ã‚¬ã‚¹ç‰¹æœ‰ã®åˆ¶ç´„æ¡ä»¶å¯¾å¿œ**
   - éœ²ç‚¹è¨ˆç®—ï¼ˆH2Oå‡ç¸®é˜²æ­¢ï¼‰
   - é…¸éœ²ç‚¹è¨ˆç®—ï¼ˆSOxå«æœ‰ã‚¬ã‚¹å¯¾å¿œï¼‰
   - è…é£Ÿé™ç•Œæ¸©åº¦ã®è€ƒæ…®
   - æœ€é©è¨ˆç®—æ‰‹æ³•ã®è‡ªå‹•é¸æŠ

3. **è¨ˆç®—ç²¾åº¦ã®æ¤œè¨¼ãƒ»ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯**
   - æ–‡çŒ®å€¤ã¨ã®æ¯”è¼ƒæ¤œè¨¼
   - Cantera vs CoolPropã®ç²¾åº¦æ¯”è¼ƒ
   - è¨ˆç®—é€Ÿåº¦ã®æœ€é©åŒ–

#### **Phase 3: çµ±åˆãƒ»æœ€é©åŒ– (Week 5-6)**
1. **ç†±é‡ãƒ™ãƒ¼ã‚¹è¨ˆç®—ã®å®Ÿè£…**
   - `_calculate_direct_heat_duty`é–¢æ•°
   - ãƒãƒƒãƒ•ã‚¡ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ”¯æ´
   - ä¸ç¢ºå®Ÿæ€§è§£ææ©Ÿèƒ½ï¼ˆMonte Carloæ³•ï¼‰

2. **è‡ªå‹•æµä½“é¸æŠæ©Ÿèƒ½ã®é«˜åº¦åŒ–**
   - æ’ã‚¬ã‚¹çµ„æˆã‚’è€ƒæ…®ã—ãŸä½œå‹•æµä½“é¸æŠ
   - æ€§èƒ½ãƒ»çµŒæ¸ˆæ€§ã®å¤šç›®çš„æœ€é©åŒ–
   - è¶…è‡¨ç•Œã‚µã‚¤ã‚¯ãƒ«å¯¾å¿œæ¤œè¨

3. **åŒ…æ‹¬çš„ãªãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼**
   - å®Ÿãƒ—ãƒ­ã‚»ã‚¹ãƒ‡ãƒ¼ã‚¿ã§ã®æ¤œè¨¼
   - è¨ˆç®—ç²¾åº¦ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
   - æ€§èƒ½ãƒ»ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–

### **Cantera + CoolProp ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®åˆ©ç‚¹**

#### **è¨ˆç®—ç²¾åº¦ã®å‘ä¸Š**
- **Cantera**: é«˜æ¸©åŸŸã§ã®åŒ–å­¦å¹³è¡¡è¨ˆç®—ã€è©³ç´°ãªç†±åŒ–å­¦ãƒ‡ãƒ¼ã‚¿
- **CoolProp**: å®‰å®šã—ãŸçŠ¶æ…‹æ–¹ç¨‹å¼ã€åºƒã„æ¸©åº¦ãƒ»åœ§åŠ›ç¯„å›²
- **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰**: å„æ‰‹æ³•ã®é•·æ‰€ã‚’çµ„ã¿åˆã‚ã›ãŸæœ€é©è¨ˆç®—

#### **å¯¾å¿œç¯„å›²ã®æ‹¡å¼µ**
- **è¤‡é›‘ãªã‚¬ã‚¹çµ„æˆ**: SOx, NOx, æœªç‡ƒæˆåˆ†ã‚’å«ã‚€å®Ÿéš›ã®æ’ã‚¬ã‚¹
- **åŒ–å­¦åå¿œè€ƒæ…®**: é«˜æ¸©åŸŸã§ã®è§£é›¢ãƒ»å†çµåˆåå¿œ
- **è¼¸é€ç‰©æ€§**: åˆ†å­å‹•åŠ›å­¦ãƒ™ãƒ¼ã‚¹ã®ç²˜åº¦ãƒ»ç†±ä¼å°åº¦è¨ˆç®—

#### **å®Ÿç”¨æ€§ã®å‘ä¸Š**
- **è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯**: ä¸€æ–¹ã®è¨ˆç®—ãŒå¤±æ•—ã—ãŸå ´åˆã®ä»£æ›¿æ‰‹æ³•
- **è¨ˆç®—æ‰‹æ³•é¸æŠ**: ãƒ—ãƒ­ã‚»ã‚¹ãƒ»æ¸©åº¦ã«å¿œã˜ãŸæœ€é©æ‰‹æ³•ã®è‡ªå‹•é¸æŠ
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: å …ç‰¢ãªä¾‹å¤–å‡¦ç†ã¨ã‚¨ãƒ©ãƒ¼å›å¾©

### **7. æŠ€è¡“çš„èª²é¡Œã¨å¯¾ç­–**

#### **7.1 æµé‡ä¸æ˜å•é¡Œã¸ã®å¯¾å¿œ**
**Issueè¨˜è¼‰ã®èª²é¡Œ**: æ’ã‚¬ã‚¹ãƒ»é«˜åœ§æ¸©æ°´ã®æµé‡ãŒä¸æ˜

**å¯¾ç­–**:
```python
# 1. å…¸å‹çš„ãªå·¥æ¥­ãƒ—ãƒ­ã‚»ã‚¹åˆ¥ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
TYPICAL_PROCESS_CONDITIONS = {
    "steel_eaf_100t": {
        "gas_flow_range": (5000, 15000),  # Nm3/h
        "temp_range": (1200, 1600),       # K
        "heat_content": (50, 150)         # MJ/t-steel
    },
    "cement_kiln_1000tpd": {
        "gas_flow_range": (180000, 220000),  # Nm3/h
        "temp_range": (573, 673),            # K
        "heat_content": (1.8, 2.2)          # GJ/t-cement
    }
}

# 2. ç†±é‡+æ¸©åº¦ã‹ã‚‰é€†ç®—ã™ã‚‹æ©Ÿèƒ½
def estimate_flow_from_heat_duty(Q_available, T_in, T_out, gas_composition):
    """ç†±é‡ã¨æ¸©åº¦å·®ã‹ã‚‰æµé‡ã‚’é€†ç®—"""
    pass

# 3. ä¸ç¢ºå®Ÿæ€§è§£ææ©Ÿèƒ½
def uncertainty_analysis(base_conditions, uncertainty_ranges):
    """ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸ç¢ºå®Ÿæ€§ã‚’è€ƒæ…®ã—ãŸMonte Carloè§£æ"""
    pass
```

#### **7.2 EAFã®å¤‰å‹•æ€§ã¸ã®å¯¾å¿œ**
**Issueè¨˜è¼‰ã®èª²é¡Œ**: ç”Ÿç”£ã‚µã‚¤ã‚¯ãƒ«ãŒä¸å®šã€æ¸©åº¦ãƒ»æµé‡ã«ã°ã‚‰ã¤ã

**å¯¾ç­–**:
```python
# 1. ãƒãƒƒãƒ•ã‚¡ã‚¿ãƒ³ã‚¯è¨­è¨ˆæ©Ÿèƒ½
def design_thermal_buffer(
    heat_profile,          # æ™‚é–“å¤‰å‹•ç†±ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
    target_steady_output,  # ç›®æ¨™å®šå¸¸å‡ºåŠ›
    buffer_medium="molten_salt"  # ãƒãƒƒãƒ•ã‚¡åª’ä½“
):
    """è“„ç†±ãƒãƒƒãƒ•ã‚¡ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆ"""
    pass

# 2. å¤‰å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³è§£æ
def analyze_heat_variability(
    time_series_data,      # æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿
    analysis_period="daily" # è§£ææœŸé–“
):
    """ç†±æºå¤‰å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ã®çµ±è¨ˆè§£æ"""
    pass

# 3. è“„ç†±ã‚·ã‚¹ãƒ†ãƒ é€£æºæ©Ÿèƒ½
def integrate_thermal_storage(
    orc_design,           # ORCè¨­è¨ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    storage_config,       # è“„ç†±ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
    operation_strategy    # é‹è»¢æˆ¦ç•¥
):
    """è“„ç†±ã‚·ã‚¹ãƒ†ãƒ çµ±åˆè¨­è¨ˆ"""
    pass
```

### **8. ä½¿ç”¨ä¾‹ã¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**

#### **8.1 é«˜ç²¾åº¦æ’ã‚¬ã‚¹ã‚±ãƒ¼ã‚¹ã®ä½¿ç”¨ä¾‹**

```python
# é›»æ°—ã‚¢ãƒ¼ã‚¯ç‚‰æ’ã‚¬ã‚¹ã®ä¾‹ï¼ˆCanteraé«˜ç²¾åº¦è¨ˆç®—ï¼‰
eaf_result = calculate_orc_performance_from_heat_source(
    T_htf_in=1473.15,  # 1200Â°C
    Vdot_htf=2.78,     # 10,000 Nm3/h â†’ m3/s (æ¨™æº–çŠ¶æ…‹)
    T_cond=305.15,     # 32Â°C
    eta_pump=0.75,
    eta_turb=0.85,
    heat_source_type="gas",
    gas_composition={
        "CO2": 0.15,
        "H2O": 0.10,
        "N2": 0.70,
        "O2": 0.05
    },
    calculation_method="cantera",  # é«˜æ¸©åŸŸã®ãŸã‚é«˜ç²¾åº¦è¨ˆç®—
    fluid_orc="Water",  # é«˜æ¸©ã®ãŸã‚æ°´è’¸æ°—ã‚µã‚¤ã‚¯ãƒ«
    superheat_C=50.0,
    pinch_delta_K=30.0,
    min_outlet_temp_K=423.15,  # 150Â°Cï¼ˆè…é£Ÿé˜²æ­¢ï¼‰
    P_htf=101325,
    mass_flow_mode=True  # è³ªé‡æµé‡ã§æŒ‡å®š
)

# ã‚»ãƒ¡ãƒ³ãƒˆã‚­ãƒ«ãƒ³æ’ã‚¬ã‚¹ã®ä¾‹ï¼ˆSOxå«æœ‰ã€ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰è¨ˆç®—ï¼‰
cement_result = calculate_orc_performance_from_heat_source(
    T_htf_in=623.15,   # 350Â°C
    Vdot_htf=55.56,    # 200,000 Nm3/h â†’ m3/s
    T_cond=305.15,     # 32Â°C
    eta_pump=0.70,
    eta_turb=0.82,
    heat_source_type="gas",
    process_type="cement_kiln",  # ãƒ—ãƒªã‚»ãƒƒãƒˆçµ„æˆä½¿ç”¨
    calculation_method="hybrid",  # SOxå«æœ‰ã®ãŸã‚Cantera+CoolProp
    fluid_orc="R1234ze",  # ä¸­æ¸©åŸŸç”¨æœ‰æ©Ÿæµä½“
    superheat_C=15.0,
    pinch_delta_K=20.0,
    min_outlet_temp_K=393.15,  # 120Â°Cï¼ˆé…¸éœ²ç‚¹è€ƒæ…®ï¼‰
    dew_point_analysis=True,   # éœ²ç‚¹è§£æå®Ÿè¡Œ
    corrosion_analysis=True    # è…é£Ÿè§£æå®Ÿè¡Œ
)

# å¤©ç„¶ã‚¬ã‚¹ç‡ƒç„¼æ’ã‚¬ã‚¹ã®ä¾‹ï¼ˆCoolPropå˜ç‹¬è¨ˆç®—ï¼‰
ng_result = calculate_orc_performance_from_heat_source(
    T_htf_in=573.15,   # 300Â°C
    Vdot_htf=1.39,     # 5,000 Nm3/h â†’ m3/s
    T_cond=305.15,     # 32Â°C
    eta_pump=0.75,
    eta_turb=0.85,
    heat_source_type="gas",
    process_type="natural_gas_combustion",
    calculation_method="coolprop",  # å˜ç´”çµ„æˆã®ãŸã‚CoolPropã§ååˆ†
    fluid_orc="Toluene",
    superheat_C=20.0,
    pinch_delta_K=15.0
)
```

#### **8.2 è¨ˆç®—æ‰‹æ³•æ¯”è¼ƒã¨ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ä¾‹**

```python
# åŒä¸€æ¡ä»¶ã§ã®è¨ˆç®—æ‰‹æ³•æ¯”è¼ƒ
def compare_calculation_methods(T_gas, gas_composition, P_gas=101325):
    """ç•°ãªã‚‹è¨ˆç®—æ‰‹æ³•ã§ã®ç‰©æ€§å€¤æ¯”è¼ƒ"""
    
    methods = ["cantera", "coolprop", "hybrid"]
    results = {}
    
    for method in methods:
        try:
            props = _get_flue_gas_properties(T_gas, gas_composition, P_gas, method)
            results[method] = {
                "density": props["rho"],
                "cp": props["Cp"],
                "enthalpy": props["h"],
                "calculation_time": time.time() - start_time
            }
        except Exception as e:
            results[method] = {"error": str(e)}
    
    return results

# ä½¿ç”¨ä¾‹
steel_eaf_composition = {
    "CO2": 0.15, "H2O": 0.10, "N2": 0.70, "O2": 0.05
}

comparison = compare_calculation_methods(
    T_gas=1473.15,  # 1200Â°C
    gas_composition=steel_eaf_composition
)

print("è¨ˆç®—æ‰‹æ³•æ¯”è¼ƒçµæœ:")
for method, result in comparison.items():
    if "error" not in result:
        print(f"{method}: Ï={result['density']:.3f} kg/mÂ³, "
              f"Cp={result['cp']:.1f} J/kg/K, "
              f"è¨ˆç®—æ™‚é–“={result['calculation_time']:.4f}s")
    else:
        print(f"{method}: ã‚¨ãƒ©ãƒ¼ - {result['error']}")
```

#### **8.3 è¤‡é›‘ãªæ’ã‚¬ã‚¹çµ„æˆã§ã®é«˜ç²¾åº¦è¨ˆç®—ä¾‹**

```python
# çŸ³ç‚­ç‡ƒç„¼æ’ã‚¬ã‚¹ï¼ˆSOx, NOxå«æœ‰ï¼‰
coal_flue_gas = {
    "CO2": 0.14,
    "H2O": 0.08,
    "N2": 0.75,
    "SO2": 0.015,  # ç¡«é»„é…¸åŒ–ç‰©
    "NO": 0.003,   # çª’ç´ é…¸åŒ–ç‰©
    "O2": 0.012
}

coal_result = calculate_orc_performance_from_heat_source(
    T_htf_in=773.15,   # 500Â°C
    Vdot_htf=27.78,    # 100,000 Nm3/h â†’ m3/s
    T_cond=305.15,
    eta_pump=0.75,
    eta_turb=0.85,
    heat_source_type="gas",
    gas_composition=coal_flue_gas,
    calculation_method="cantera",  # SOx/NOxå«æœ‰ã®ãŸã‚Canteraå¿…é ˆ
    fluid_orc="Cyclohexane",
    superheat_C=25.0,
    pinch_delta_K=25.0,
    min_outlet_temp_K=403.15,  # 130Â°Cï¼ˆé…¸éœ²ç‚¹+å®‰å…¨ãƒãƒ¼ã‚¸ãƒ³ï¼‰
    acid_dew_point_analysis=True,  # é…¸éœ²ç‚¹è§£æ
    chemical_equilibrium=True,     # åŒ–å­¦å¹³è¡¡è€ƒæ…®
    detailed_output=True           # è©³ç´°å‡ºåŠ›
)

# ãƒã‚¤ã‚ªãƒã‚¹ç‡ƒç„¼æ’ã‚¬ã‚¹ï¼ˆå¯å¤‰çµ„æˆï¼‰
biomass_variable_composition = {
    "CO2": 0.13,
    "H2O": 0.15,   # é«˜æ°´åˆ†
    "N2": 0.70,
    "O2": 0.02,
    "CO": 0.001,   # æœªç‡ƒæˆåˆ†ã‚ãšã‹
    "tar_compounds": 0.009  # ã‚¿ãƒ¼ãƒ«æˆåˆ†ï¼ˆCanteraã§è¿‘ä¼¼è¨ˆç®—ï¼‰
}

biomass_result = calculate_orc_performance_from_heat_source(
    T_htf_in=873.15,   # 600Â°C
    Vdot_htf=13.89,    # 50,000 Nm3/h â†’ m3/s
    T_cond=305.15,
    eta_pump=0.70,
    eta_turb=0.80,
    heat_source_type="gas",
    gas_composition=biomass_variable_composition,
    calculation_method="hybrid",
    fluid_orc="Toluene",
    superheat_C=30.0,
    pinch_delta_K=20.0,
    uncertainty_analysis=True,     # ä¸ç¢ºå®Ÿæ€§è§£æ
    composition_sensitivity=True,  # çµ„æˆæ„Ÿåº¦è§£æ
    fouling_consideration=True     # ãƒ•ã‚¡ã‚¦ãƒªãƒ³ã‚°è€ƒæ…®
)
```

#### **8.2 ç†±é‡ãƒ™ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®ä½¿ç”¨ä¾‹**

```python
# ãƒãƒƒãƒ•ã‚¡ä»˜ãã‚·ã‚¹ãƒ†ãƒ ã®ä¾‹
buffer_result = calculate_orc_performance_from_heat_source(
    Q_direct=5000,      # 5 MWç†±é‡
    T_htf_in=473.15,    # 200Â°C
    T_cond=305.15,      # 32Â°C
    eta_pump=0.75,
    eta_turb=0.85,
    heat_source_type="heat_duty",
    T_source_out=393.15, # 120Â°Cå‡ºå£æ¸©åº¦
    fluid_orc="Toluene", # ä¸­æ¸©åŸŸç”¨æœ‰æ©Ÿæµä½“
    superheat_C=20.0,
    pinch_delta_K=15.0
)
```

### **9. æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ**

#### **9.1 å¯¾å¿œç¯„å›²ã®æ‹¡å¤§**
- **æ¸©æ°´ã®ã¿** â†’ **æ¸©æ°´ + æ’ã‚¬ã‚¹ + ç†±é‡ãƒ™ãƒ¼ã‚¹**
- **70-100Â°C** â†’ **70-500Â°Cä»¥ä¸Š**
- **å˜ä¸€æµä½“** â†’ **è‡ªå‹•æœ€é©æµä½“é¸æŠ**

#### **9.2 ç²¾åº¦å‘ä¸Š**
- å®Ÿéš›ã®å·¥æ¥­ãƒ—ãƒ­ã‚»ã‚¹ã«å³ã—ãŸç‰©æ€§è¨ˆç®—
- æ¸©åº¦ä¾å­˜æ¯”ç†±ã®ç©åˆ†è¨ˆç®—
- ãƒ—ãƒ­ã‚»ã‚¹ç‰¹æœ‰ã®åˆ¶ç´„æ¡ä»¶è€ƒæ…®

#### **9.3 ä½¿ã„ã‚„ã™ã•**
- æµé‡ä¸æ˜ã‚±ãƒ¼ã‚¹ã§ã‚‚ä½¿ç”¨å¯èƒ½
- å…¸å‹çš„ãªå·¥æ¥­ãƒ—ãƒ­ã‚»ã‚¹ç”¨ãƒ—ãƒªã‚»ãƒƒãƒˆ
- ä¸ç¢ºå®Ÿæ€§è§£æã«ã‚ˆã‚‹ä¿¡é ¼æ€§è©•ä¾¡

#### **9.4 æ‹¡å¼µæ€§**
- æ–°ã—ã„ç†±æºã‚¿ã‚¤ãƒ—ã®è¿½åŠ ãŒå®¹æ˜“
- ä½œå‹•æµä½“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ‹¡å¼µå¯èƒ½
- å°†æ¥çš„ãªè¶…è‡¨ç•Œã‚µã‚¤ã‚¯ãƒ«å¯¾å¿œ

### **10. ã¾ã¨ã‚**

ã“ã®å¤‰æ›´ã«ã‚ˆã‚Šã€ORCè§£æã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ç™ºå±•ã—ã¾ã™ï¼š

1. **å¤šæ§˜ãªç†±æºã¸ã®å¯¾å¿œ**: æ¸©æ°´ã€æ’ã‚¬ã‚¹ã€ç›´æ¥ç†±é‡æŒ‡å®š
2. **é«˜æ¸©åŸŸã¸ã®æ‹¡å¼µ**: 500Â°Cä»¥ä¸Šã®å·¥æ¥­æ’ç†±ã¸ã®å¯¾å¿œ
3. **å®Ÿç”¨æ€§ã®å‘ä¸Š**: æµé‡ä¸æ˜ã‚±ãƒ¼ã‚¹ã‚„å¤‰å‹•ç†±æºã¸ã®å¯¾å¿œ
4. **è‡ªå‹•åŒ–æ©Ÿèƒ½**: æœ€é©æµä½“é¸æŠã€ãƒ—ãƒ­ã‚»ã‚¹åˆ¥ãƒ—ãƒªã‚»ãƒƒãƒˆ
5. **ä¿¡é ¼æ€§å‘ä¸Š**: ä¸ç¢ºå®Ÿæ€§è§£æã€ãƒãƒƒãƒ•ã‚¡ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

ã“ã‚Œã«ã‚ˆã‚Šã€ç”£æ¥­æ’ç†±å›åã®ãŸã‚ã®ORCå°å…¥æ¤œè¨ãŒã€ã‚ˆã‚Šç¾å®Ÿçš„ã§åŒ…æ‹¬çš„ã«è¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã“ã¨ãŒæœŸå¾…ã•ã‚Œã¾ã™ã€‚

---

*ã“ã®ãƒ—ãƒ©ãƒ³ã¯æ®µéšçš„ãªå®Ÿè£…ã‚’æƒ³å®šã—ã¦ãŠã‚Šã€æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ã‚’æœ€å°é™ã«æŠ‘ãˆãªãŒã‚‰ã€æ–°æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ãæ–¹é‡ã§ã™ã€‚*
